#summary Lists the instruments that are currently supported.
#labels Support,Featured

<wiki:toc/>

= Supported Instruments =

This page lists the instruments which are supported by the toolbox, and the data formats required for each instrument. If you have data from an unsupported instrument, or from a supported instrument, but in an unsupported format, send me an [http://code.google.com/u/pauld.mccarthy/ email], or leave a comment on this page, and I'll look into adding support for the instrument/format.

Instruments for which support will be added in the future:
 * Seabird SBE19+
 * Seabird SBE21
 * Vaisala WXT520
 * FSI NXIC CTD
 * 

== Seabird SBE37/SBE39 ==

The toolbox can read in data that has been downloaded from an SBE37 'Microcat' CTP sensor or an SBE39 temperature/pressure sensor

The following variants of the SBE37 exist:
 * SBE37-IM
 * SBE37-IMP
 * SBE37-SM  (RS232)
 * SBE37-SM  (RS485)
 * SBE37-SMP (RS232)
 * SBE37-SMP (RS485)
 * SBE37-SI  (RS232)
 * SBE37-SI  (RS485)
 * SBE37-SIP (RS232)
 * SBE37-SIP (RS485)

The following variants of the SBE39 exist:
 * SBE39
 * SBE39-IM

The SBE output format is configurable, and there are slight differences in output formats between variants. Additionally, instruments which run an older firmware version use different commands for configuring the output format and downloading data. The toolbox will only parse sample data which is in the following format:

{{{
  temperature[, conductivity][, pressure][, salinity], date, time
}}}
where

 * `temperaturee`: floating point, Degrees Celsius ITS-90
 * `conductivity`: floating point, S/m (only on SBE37)
 * `pressure`:     floating point, decibars, optional (present on instruments with optional pressure sensor)
 * `salinity`: floating point, PSU, optional (may be present on SBE37 instruments with firmware >= 3.0)
 * `date`: dd mmm yyyy (e.g. 01 Jan 2008)
 * `time`: hh:mm:ss    (e.g. 15:45:03)

All SBE37 variants can be configured to output this format. SBE39 variants provide data in this format only. On SBE37 instruments running firmware < 3.0, the sensor should be configured as follows:

{{{
  Format=1
}}}

For instruments running firmware >= 3.0:

{{{
OutputFormat=1
OutputDepth=N   (if sensor supports this command)
OutputSal=N     (if sensor supports this command - Y if you want salinity)
OutputSV=N
OutputDensity=N (if sensor supports this command)
OutputTime=Y    (if sensor supports this command)
}}}

The input file must also contain a header section which contains sensor metadata and calibration information (as obtained via the 'DS' and 'DC' commands) - this is the output format provided by the Windows seaterm program.

== Wetlabs WQM ==

The toolbox is able to parse data retrieved from a Wetlabs WQM CTD/ECO instrument. The data must be in '.dat' format, i.e. raw data which has been processed by the WQMHost software, in tab-delimited format. WQMHost allows a wide range of fields to be included in the output file; the following are supported by the toolbox:

 * `WQM`: literal 'WQM'
 * `SN`: serial number - required
 * `MMDDYY` (date - required
 * `HHMMSS` (time - required
 * `Conductivity` (floating point, milliSiemens/metre
 * `Temperature` (floating point, Degrees Celsius
 * `Presssure` (floating point, Decibar
 * `Salinity` (floating point, PSS
 * `Dissolved Oxygen`: (floating point, milligrams/Litre
 * `Chlorophyll`: (floating point, micrograms/Litre
 * `Turbidity`: (floating point, NTU

Any other fields which are present in the input file will be ignored.

== Aquatec Aqualogger 520 ==

The toolbox is able to parse raw data file retrieved from an Aquatec AQUAlogger 520. The
AQUAlogger 520 range of sensors provide logging capability for temperature and pressure. The following variants on the AQUAlogger 520 exist:
 * 520T:  temperature
 * 520P:  pressure
 * 520PT: pressure and temperature

The raw data file format for all loggers is identical; every line in a file, including sample data, is a key-value pair, separated by a comma. The following lines are examples:

{{{
VERSION,3.0
LOGGER TYPE,520PT Pressure & Temperature   
LOGGER,23-502,SYD100 T2 
DATA,23:00:01 24/06/2008,29412,16.310779,26345,1.025358,
DATA,23:00:02 24/06/2008,29411,16.312112,26346,1.025938,
}}}

If the logger was configured to use burst mode, the bursts are averaged.


== Teledyne/RDI Workhorse ADCP ==

The toolbox is able to parse binary files retrieved from a Teledyne RD Workhorse ADCP instrument. The toolbox is only able to interpret raw files in the PD0 format (as it stands at December 2008). See the Workhorse H-ADCP Operation manual (available from the [http://www.rdinstruments.com/ Teledyne website]) for a description of the output format. As the toolbox works from raw binary files, pre-processing with RDI software is not required.

Unfortunately, reading in these binary files using Matlab is quite slow (about 30 seconds on test data of ~8000 ensembles/8MB). Re-implementing in C would provide much better performance.

A raw Workhorse data file consists of a set of 'ensembles'. Each ensemble contains data for one sample period. An ensemble is made up of a number of sections, the last five of which may or may not be present:

 * *Header*: Ensemble information (size/contents). Always present
 * *Fixed Leader Data*: ADCP configuration, serial number etc. Always present
 * *Variable Leader Data*: Time, temperature, salinity etc. Always present.
 * *Velocity*: Current velocities for each depth (a.k.a 'bins' or 'cells').
 * *Correlation Magnitude*: 'Magnitude of the normalized echo autocorrelation at the lag used for estimating the Doppler phase change'. 
 * *Echo Intensity*: Echo intensity data. 
 * *Percent Good*: Percentage of good data for each depth cell.
 * *Bottom Track Data*: Bottom track data. 

The toolbox reads in all of the ensembles and extracts the following:
 * Time
 * Temperature (at each time)
 * Pressure (at each time, if present)
 * Salinity (at each time, if present)
 * Northward velocity (at each time and depth)
 * Eastward velocity (at each time and depth)
 * Water speed (at each time and depth, derived from northward/eastward velocities)
 * Water direction (at each time and depth, derived from northward/eastward velocities)
 * Acoustic backscatter intensity (at each time and depth, a separate variable for each beam)
 * Pitch (at each time, if present)
 * Roll (at each time, if present)
 * Heading (at each time, if present)

The conversion from the ADCP velocity values currently assumes that the ADCP is using earth coordinates (see section 13.4 'Velocity Data Format' of the Workhorse H-ADCP Operation Manual).

== Nortek ADCP ==

The toolbox is able to parse raw binary data from the following Nortek instruments. The binary format for these instruments is specified in the Nortek System Integrator Manual, available for download from the [http://www.nortek-as.com/en/library/rep-room/application-development/system-integrator-manual Nortek website]:

 * Aquadopp Profiler (`.prf` files)
 * Continental (`.cpr` files)
 * AWAC (`.wpr` files)

For the Aquadopp Profiler and Continental, only the raw binary file is required. For reading wave data from an AWAC, you must use Nortek software to generate the processed wave data files (`.whd` and `.wap`), as the AWAC binary file only contains raw wave data.

For the Aquadopp Profiler, Continental and AWAC, the following data is extracted:

 * Time
 * Battery voltage (at each time)
 * Northward velocity (at each time and depth)
 * Eastward velocity (at each time and depth)
 * Upward velocity (at each time and depth)
 * Temperature (at each time)
 * Pressure (at each time)
 * Pitch (at each time)
 * Roll (at each time)
 * Heading (at each time)

For the AWAC, if wave data is present, the following data is extracted. The AWAC wave data is loaded separately from the profile data, as it is on a different time scale:

 * Time
 * Battery voltage
 * Heaeding
 * Pitch
 * Roll
 * Temperature
 * Pressure
 * Significant wave height
 * Zero upcrossing period

=== `.whd` file format ===

The toolbox currently assumes that the wave data `.whd` file columns adhere to the following format:

||*Column*||*Field*                ||*Unit*   ||
||1       ||Month                  ||1-12     ||
||2       ||Day                    ||1-31     ||
||3       ||Year                   ||         ||
||4       ||Hour                   ||0-23     ||
||5       ||Minute                 ||0-59     ||
||6       ||Second                 ||0-59     ||
||7       ||Burst counter          ||         ||
||8       ||No of wave data records||         ||
||9       ||Cell position          ||m        ||
||10      ||Battery voltage        ||V        ||
||11      ||Soundspeed             ||m/s      ||
||12      ||Heading                ||degrees  ||
||13      ||Pitch                  ||degrees  ||
||14      ||Roll                   ||degrees  ||
||15      ||Minimum pressure       ||dbar     ||
||16      ||Maximum pressure       ||dbar     ||
||17      ||Temperature            ||degrees C||
||18      ||CellSize               ||m        ||
||19      ||Noise amplitude beam 1 ||counts   ||
||20      ||Noise amplitude beam 2 ||counts   ||
||21      ||Noise amplitude beam 3 ||counts   ||
||22      ||Noise amplitude beam 4 ||counts   ||
||23      ||AST window start       ||m        ||

=== `.wap` file format ===

The toolbox currently assumes that the wave data `.wap` file columns adhere to the following format:

||*Column*||*Field*                        ||*Unit*||
||1       ||Month                          ||1-12  ||
||2       ||Day                            ||1-31  ||
||3       ||Year                           ||      ||
||4       ||Hour                           ||0-23  ||
||5       ||Minute                         ||0-59  ||
||6       ||Second                         ||0-59  ||
||7       ||Significant height (Hs)        ||m     ||
||8       ||Mean zerocrossing period (Tm02)||s     ||
||9       ||Peak period (Tp)               ||s     ||
||10      ||Peak direction (DirTp)         ||deg   ||
||11      ||Directional spread (Spr1)      ||deg   ||
||12      ||Mean direction (Mdir)          ||deg   ||
||13      ||Mean Pressure                  ||m     ||
||14      ||Unidirectivity index           ||      ||
||15      ||Error Code                     ||      ||