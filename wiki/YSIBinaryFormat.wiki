#summary My attempts to reverse engineer the YSI binary file format

= YSI 6-series Binary file format (.dat) =

YSI do not provide details on the format of the binary files retrieved from their 6-series instruments. This page details my attempts to reverse engineer the file format. This information is based on a file retrieved from a 6600 V2.4 instrument.

The file consists of a header, followed by a variable number of records.

== Header ==

*NOTE*: The following description is an assumption which is based on a single sample data file; this description may be rendered obsolete when I receive more data files to play with.

The header begins with 111 bytes; I am not sure what these bytes contain - there doesn't seem to be anything useful.

This section is followed by a list of the elements contained in the records which follow the header. Time is always the first element in each record, and is always present. Each element in the list is 15 bytes, and begins with `0x44`. The fourth byte indicates the element type, as listed below. All other bytes in these 15 byte fields are 0.

|| *ID*   || *Field*                       ||
|| `0x01` || Temperature (Degrees Celsius) ||
|| `0x06` || SpCond (mS/cm)                ||
|| `0x04` || Cond (mS/cm)                  ||
|| `0x0A` || TDS (g/L)                     ||
|| `0x0C` || Salinity (ppt)                ||
|| `0x16` || Depth (m)                     ||
|| `0x12` || pH                            ||
|| `0x13` || ORP (mV)                      ||
|| `0xCB` || Turbidity (NTU+)              ||
|| `0xC1` || Chlorophyll (ug/L)            ||
|| `0xC2` || Chlorophyll (RFU)             ||
|| `0xD3` || ODO (%)                       ||
|| `0xD4` || ODO (mg/L)                    ||
|| `0x1C` || Battery (V)                   ||
|| `0x18` || BP (psi)                      ||
|| `0xC4` || Latitude                      ||
|| `0xC5` || Longitude                     ||

== Record ==

*NOTE* This description is specific to the single data file I have at my disposal; this description will likely change when I acquire more files.

Each record is 73 bytes in length; the contents of each record is identical, and is detailed in the following table. All multi-byte fields are stored least significant byte first.

|| *Offset* || *Length* || *Description* || *Type* || *Note* ||
|| 0  || 1 || Sync byte   || uint8  || `0x44` ||
|| 1  || 4 || Time        || uint32 || Seconds since 1 March 1984 00:00:00 ||
|| 5  || 4 || Temperature || float  || Degrees Celsius ||
|| 9  || 4 || !SpCond     || float  || mS/cm ||
|| 13 || 4 || Cond        || float  || mS/cm ||
|| 17 || 4 || TDS         || float  || g/L   ||
|| 21 || 4 || Salinity    || float  || ppt   ||
|| 25 || 4 || Depth       || float  || m     ||
|| 29 || 4 || pH          || float  ||       ||
|| 33 || 4 || ORP         || float  || mV    ||
|| 37 || 4 || Turbidity   || float  || NTU+  ||
|| 41 || 4 || Chlorophyll || float  || ug/L  ||
|| 45 || 4 || Chlorophyll || float  || RFU   ||
|| 49 || 4 || ODO         || float  || %     ||
|| 53 || 4 || ODO Conc    || float  || mg/L  ||
|| 57 || 4 || Battery     || float  || V     ||
|| 61 || 4 || BP          || float  || psi   ||
|| 65 || 4 || Latitude    || float  ||       ||
|| 69 || 4 || Longitude   || float  ||       ||