#summary Specification of the automatic QC module
#labels Specification

<wiki:toc max_depth="2"/>

= Automatic Quality Control =

== Overview ==

One file exists for each automatic QC procedure. The procedures act as filters on the data. Data is passed through a chain of filters; this chain is configured by the user. The file/function name is of the form `[filter_name]QC.m` where `filter_name` is a unique name for the filter.

For example, the range checking filter file is titled `rangeQC.m`, and the function is called `rangeQC`.

When a filter is executed, it is passed the entire data set. An alternate design would be to stream individual samples (or blocks of samples) through the filter chain, but I do'nt believe that this would provide much of a performance benefit, and would not be appropriate for some types of filter (e.g. in/out of water removal).

Filter procedures are able to modify/remove data, or simply flag regions of data which do not pass through the filter. When a filter modifies/removes data, it should add a human readable entry to the `log` field in the `sample_data` struct, (see the [DataStructures data structures spec] for information on flagged data and log entries). 

== Function format ==

All auto-QC filter functions must adhere to the following format:

 `function sample_data = nameQC ( sample_data, cal_data, varargin )`

where:
 * `cal_data` is a struct containing calibration and metadata information.
 * `sample_data` is a struct containing the data set. Because this is both an input and output parameter, this implies that filter functions are able to modify the data set which is passed in. 
 * `varargin` is a set of configuration parameters for the filter. If the filter has no parameters, this argument may be omitted. If the filter does have parameters, the filter *must* be able to be called without specifying any parameters, i.e. all of the parameters must be optional.
 